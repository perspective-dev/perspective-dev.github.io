(globalThis.webpackChunk_perspective_dev_docs=globalThis.webpackChunk_perspective_dev_docs||[]).push([[329],{2027:()=>{var e=new WeakMap,t=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?5e6:1e7,r=0,s=0,n=performance.now();var a=(e,...t)=>e.map((e,r)=>[e,t[r]]).flat().filter(e=>!!e).join(""),i=new Map;async function o(e,t){if(i.has(e)&&(await i.get(e),i.has(e)))await i.get(e);else{i.set(e,(()=>{let e,t=new Promise(t=>{e=t});return t.resolve=e,t})());try{return await t()}finally{let t=i.get(e);i.delete(e),t.resolve()}}}var l=class extends HTMLElement{create_shadow_dom(){this.attachShadow({mode:"open"});this.shadowRoot.innerHTML=a`
            <style>
                ${":host{position:absolute;top:0px;left:0px;right:0px;bottom:0px;overflow:scroll;overflow-anchor:none;overscroll-behavior:none;-webkit-overflow-scrolling:touch;}div.rt-virtual-panel{position:absolute;top:0;left:0;right:0;pointer-events:none;}div.rt-scroll-table-clip{position:sticky;contain:strict;overflow-anchor:none;width:100%;height:100%;}div.rt-tree-container{display:flex;align-items:center;height:100%;}slot{position:absolute;overflow:hidden;overflow-anchor:none;}"}
            </style>
            <style>
                ${":host ::slotted(table){--regular-table--transform-x:0px;--regular-table--transform-y:0px;--regular-table--clip-x:0px;--regular-table--clip-y:0px;}"}
            </style>
            <div class="rt-virtual-panel"></div>
            <div class="rt-scroll-table-clip">${"<slot></slot>"}</div>
        `;let[,e,t,r]=this.shadowRoot.children;this._sub_cell_style=e,this._table_clip=r,this._virtual_panel=t,this._setup_virtual_scroll()}_setup_virtual_scroll(){this._table_clip&&("both"===this._virtual_mode||"vertical"===this._virtual_mode?this._table_clip.style.top="0px":this._table_clip.style.removeProperty("top"),"both"===this._virtual_mode||"horizontal"===this._virtual_mode?this._table_clip.style.left="0px":this._table_clip.style.removeProperty("left"),"both"!==this._virtual_mode?this._table_clip.style.contain="none":this._table_clip.style.removeProperty("contain"))}_calculate_viewport(e,t){let{start_row:r,end_row:s}=this._calculate_row_range(e),{start_col:n,end_col:a}=this._calculate_column_range(t);return this._nrows=e,{start_col:n,end_col:a,start_row:r,end_row:s}}_calculate_row_range(e){let{height:t}=this._container_size,r=this._column_sizes.row_height||19,s=this._view_cache.config.column_pivots.length,n=Math.max(1,this._virtual_panel.offsetHeight-t),a=Math.max(Math.ceil(this.scrollTop),0)/n,i=t/r-s,o=Math.max(0,(e||0)-i)*a;return{start_row:o,end_row:Math.max(0,Math.min(o+i,e))}}_calc_start_column(){let e=this._view_cache.config.row_pivots.length,t=0,r=0,s=0;for(;r<this.scrollLeft;){let n=this._column_sizes.indices[t+e];s=this.scrollLeft-r,t+=1,r+=void 0!==n?n:60}return t+=s/(this._column_sizes.indices[t+e-1]||60),Math.max(0,t-1)}_calculate_column_range(e){if("none"===this._virtual_mode||"vertical"===this._virtual_mode)return{start_col:0,end_col:1/0};{let t=this._calc_start_column();return{start_col:t,end_col:t+(this.table_model.num_columns()||Math.min(e,Math.ceil(this._container_size.width/60)))+1}}}_max_scroll_column(e){let t=0;if(this._view_cache.config.row_pivots.length>0)for(let n of this._column_sizes.indices.slice(0,this._view_cache.config.row_pivots.length))t+=n;let r=this._view_cache.config.row_pivots.length,s=e;for(;t<this._container_size.width&&s>=0;)s--,t+=this._column_sizes.indices[s+r]||60;return Math.min(e-1,s+1)}_validate_viewport({start_col:e,end_col:t,start_row:r,end_row:s}){r=Math.floor(r),s=Math.ceil(s),e=Math.floor(e),t=Math.ceil(t);let n=this._start_col!==e,a=this._start_row!==r||this._end_row!==s||this._end_col!==t;return this._start_col=e,this._end_col=t,this._start_row=r,this._end_row=s,{invalid_column:n,invalid_row:a}}_calc_scrollable_column_width(e){let t=this._view_cache.config.row_pivots.length,r=this._max_scroll_column(e),s=t,n=0;for(;s<r+t;)n+=this._column_sizes.indices[s]||60,s++;if(s<this._column_sizes.indices.length){let e=this._column_sizes.indices.slice(0,this._view_cache.config.row_pivots.length).reduce((e,t)=>e+t,0);n+=Math.max(0,this._column_sizes.indices[s]-(this._container_size.width-e)||0)}return n}_update_virtual_panel_width(e,t){if(e)if("vertical"===this._virtual_mode||"none"===this._virtual_mode)this._virtual_panel.style.width=this._column_sizes.indices.reduce((e,t)=>e+t,0)+"px";else{let e=this._calc_scrollable_column_width(t);if(0!==e){let t=this._container_size.width+e+2;this._virtual_panel.style.width=t+"px"}else this._virtual_panel.style.width="1px"}}_update_virtual_panel_height(e){let r,{row_height:s=19}=this._column_sizes,n=this._view_cache.config.column_pivots.length*s;r=Math.min(t,e*s+n),this._virtual_panel.style.height=`${r}px`}async draw(e={}){return typeof e.throttle<"u"&&!e.throttle?await c.call(this,e):await o(this,()=>c.call(this,e))}async _draw_flush(){await async function(e){return await new Promise(requestAnimationFrame),await i.get(e)}(this)}update_sub_cell_offset(e){let t=this._column_sizes.row_height*(e.start_row%1)||0,r=this._column_sizes.indices[(this.table_model._row_headers_length||0)+Math.floor(e.start_col)]*(e.start_col%1)||0,s=this._sub_cell_style.sheet?.cssRules[0].style;s&&(s.setProperty("--regular-table--clip-x",`${r}px`),s.setProperty("--regular-table--clip-y",`${t}px`),s.setProperty("--regular-table--transform-x",`-${r}px`),s.setProperty("--regular-table--transform-y",`-${t}px`))}};async function c(e){let t=performance.now(),{invalid_viewport:n=!0,preserve_width:a=!1}=e,{num_columns:i,num_rows:o,num_row_headers:l,num_column_headers:c,row_height:h}=await this._view_cache.view(0,0,0,0);void 0!==l&&(this._view_cache.row_pivots=Array(l).fill(0)),void 0!==c&&(this._view_cache.column_pivots=Array(c).fill(0)),this._container_size={width:"none"===this._virtual_mode||"vertical"===this._virtual_mode?1/0:this._table_clip.clientWidth,height:"none"===this._virtual_mode||"horizontal"===this._virtual_mode?1/0:this._table_clip.clientHeight},this._update_virtual_panel_height(o),a||this._update_virtual_panel_width(n,i);let f=this._calculate_viewport(o,i),{invalid_row:d,invalid_column:_}=this._validate_viewport(f);if(this._invalid_schema||d||_||n){let e=[],t=!0;for await(let r of this.table_model.draw(this._container_size,this._view_cache,this._selected_id,a,f,i)){void 0!==r&&(e=e.concat(r)),t&&(this.update_sub_cell_offset(f),t=!1),this._is_styling=!0;let s=this._style_callbacks;for(let e of s)await e({detail:this});if(this._is_styling=!1,!this._invalidated&&void 0!==r)break;this._invalidated=!1}this.table_model.autosize_cells(e,h),this.table_model.header.reset_header_cache(),a||this._update_virtual_panel_width(this._invalid_schema||_,i),this._invalid_schema=!1}else this.update_sub_cell_offset(f);!function(e){r=(r*s+e)/(s+1),s+=1}(performance.now()-t)}var h=class extends l{register_listeners(){this.addEventListener("mousedown",this._on_click_or_dblclick.bind(this)),this.addEventListener("scroll",this._on_scroll.bind(this),{passive:!0}),this._register_glitch_scroll_listeners()}async _on_scroll(e){e.stopPropagation(),await this.draw({invalid_viewport:!1}),this.dispatchEvent(new CustomEvent("regular-table-scroll"))}_register_glitch_scroll_listeners(){this.addEventListener("mousewheel",this._on_mousewheel.bind(this),{passive:!0})}_on_mousewheel(e){if(!window.safari)return;let{clientWidth:t,clientHeight:r,scrollTop:s,scrollLeft:n}=this;e.preventDefault(),e.returnValue=!1;let a=Math.max(1,this._virtual_panel.offsetHeight-r),i=Math.max(1,this._virtual_panel.offsetWidth-t);this.scrollTop=Math.max(0,Math.min(a,s+e.deltaY)),this.scrollLeft=Math.max(0,Math.min(i,n+e.deltaX)),this._on_scroll(e)}_on_touchmove(e){e.stopPropagation(),e.preventDefault(),e.returnValue=!1;let{clientWidth:t,clientHeight:r}=this,s=Math.max(1,this._virtual_panel.offsetHeight-r),n=Math.max(1,this._virtual_panel.offsetWidth-t);this.scrollTop=Math.min(s,this._memo_scroll_top+(this._memo_touch_startY-e.touches[0].pageY)),this.scrollLeft=Math.min(n,this._memo_scroll_left+(this._memo_touch_startX-e.touches[0].pageX)),this._on_scroll(e)}_on_touchstart(e){this._memo_touch_startY=e.touches[0].pageY,this._memo_touch_startX=e.touches[0].pageX,this._memo_scroll_top=this.scrollTop,this._memo_scroll_left=this.scrollLeft}async _on_dblclick(t){let r=t.target;for(;"TD"!==r.tagName&&"TH"!==r.tagName;)if(r=r.parentElement,!this.contains(r))return;let s=t.target.classList.contains("rt-column-resize"),n=e.get(r);if(s){t.stopImmediatePropagation(),r.style.minWidth="",r.style.maxWidth="",t.shiftKey?(this._column_sizes.override=[],this._column_sizes.auto=[],this._column_sizes.indices=[]):(this._column_sizes.override[n.size_key]=void 0,this._column_sizes.auto[n.size_key]=void 0,this._column_sizes.indices[n.size_key]=void 0);for(let e of t.shiftKey?[this.table_model.header.cells[this.table_model.header.cells.length-1],...this.table_model.body.cells]:this.table_model.body.cells)for(let r of t.shiftKey?e:[e[n._virtual_x]])r&&(r.style.minWidth="",r.style.maxWidth="",r.classList.remove("rt-cell-clip"));await this.draw()}}async _on_click(t){if(0!==t.button)return;let r=t.target;for(;"TD"!==r.tagName&&"TH"!==r.tagName;)if(r=r.parentElement,!this.contains(r))return;let s=t.target.classList.contains("rt-column-resize"),n=e.get(r);s&&(this._on_resize_column(t,r,n),t.stopImmediatePropagation())}async _on_click_or_dblclick(e){let t=performance.now();this._last_clicked_time&&t-this._last_clicked_time<500?(this._last_clicked_time=t,await this._on_dblclick(e)):(this._last_clicked_time=t,await this._on_click(e))}_on_resize_column(e,t,r){let{_virtual_x:s,size_key:n}=r,a=e.pageX,i=s+t.colSpan-1,l=this.table_model.header.get_column_header(i),c=this._column_sizes.indices[n],h=e=>o(this,async()=>await this._on_resize_column_move(e,l,a,c,n,i)),f=()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",f);let e=this._column_sizes.override[n],t=this._column_sizes.indices[n]!==e;this._column_sizes.indices[n]=e,t&&this.draw()};document.addEventListener("mousemove",h),document.addEventListener("mouseup",f)}async _on_resize_column_move(e,t,r,s,n,a){await new Promise(requestAnimationFrame);let i=e.pageX-r,o=Math.max(1,s+i);if(this._column_sizes.override[n]=o,i<0)await this.draw({preserve_width:!0,throttle:!1});else{t.style.minWidth=o+"px",t.style.maxWidth=o+"px";let e=this._column_sizes.auto[n];for(let t of this.table_model.body.cells){let r=t[a];r&&(r.style.maxWidth=r.style.minWidth=o+"px",r.classList.toggle("rt-cell-clip",e>o))}}}},f=class{constructor(e){this._name=e,this._elements=[],this._index=0}reset(){this._index=0}get(){this._elements[this._index]||(this._elements[this._index]=document.createElement(this._name));let e=this._elements[this._index];return this._index+=1,e}},d=class{constructor(e,t,r){this._column_sizes=e,this._container=t,this._span_factory=new f("span"),this.table=r,this.cells=[],this.rows=[]}num_columns(){return this._get_row(Math.max(0,this.rows.length-1)).row_container.length}num_rows(){return this.cells.length}_set_metadata(t,r){e.set(t,r)}_get_or_create_metadata(t){if(void 0===t)return{};if(e.has(t))return e.get(t);{let r={};return e.set(t,r),r}}_replace_cell(e,t){let{tr:r,row_container:s}=this._get_row(e),n=s[t];return n&&(r.removeChild(n),s.splice(t,1,void 0)),n}_fetch_cell(e,t){if(!(e<0||t<0))return this.cells[e]?.[t]}_get_row(e){let t=this.rows[e];t||(t=this.rows[e]=document.createElement("tr"),this.table.appendChild(t));let r=this.cells[e];return r||(r=this.cells[e]=[]),{tr:t,row_container:r}}_get_cell(e="TD",t,r){let{tr:s,row_container:n}=this._get_row(t),a=n[r];if(a||(r<n.length?(a=n[r]=document.createElement(e),s.insertBefore(a,n.slice(r+1).find(e=>e))):(a=n[r]=document.createElement(e),s.appendChild(a))),a.tagName!==e){let n=document.createElement(e);s.replaceChild(n,a),this.cells[t].splice(r,1,n),a=n}return a}_clean_columns(e){for(let t=0;t<this.rows.length;t++){let r=this.rows[t],s=this.cells[t];this.cells[t]=s.slice(0,e[t]||e);let n=this.cells[t].filter(e=>void 0!==e).length;for(;r.children[n];)r.removeChild(r.children[n])}}_clean_rows(e){for(;this.table.children[e];)this.table.removeChild(this.table.children[e]);this.rows=this.rows.slice(0,e),this.cells=this.cells.slice(0,e)}},_=class extends d{constructor(...e){super(...e),this._group_header_cache=[],this._offset_cache=[]}_draw_group_th(e,t,r){let s=this._get_cell("TH",t,e[t]||0);if(e[t]+=1,s.removeAttribute("colspan"),s.style.minWidth="0",s.textContent="",r instanceof HTMLElement)s.appendChild(r);else{let e=this._span_factory.get("span");e.textContent=r,s.appendChild(e)}let n=this._span_factory.get("span");return n.className="rt-column-resize",s.appendChild(n),s}_draw_group(e,t,r){let s=this._get_or_create_metadata(r);return s.column_header=e,s.value=t,s.value=t,s}_draw_th(e,t,r,s,n){let a=this._get_or_create_metadata(r);if(a.column_header=e,a.value=t,a.size_key=n.length?n[0]:n,!(n.length>1)){let e=this._column_sizes.override[a.size_key],t=this._column_sizes.auto[a.size_key];e?(r.classList.toggle("rt-cell-clip",t>e),r.style.minWidth=e+"px",r.style.maxWidth=e+"px"):t?(r.classList.remove("rt-cell-clip"),r.style.maxWidth="",r.style.minWidth=t+"px"):(r.style.maxWidth="",r.style.maxWidth="")}return a}get_column_header(e){return this._get_cell("TH",this.num_rows()-1,e)}draw(e,t,r,s,n,a,i,o,l){let c,h,f,d,_=t?.length;if(0!==_){o=typeof o>"u"?_-1:o;for(let u=0;u<_;u++){if(f=t[u]?t[u]:"",this._offset_cache[u]=this._offset_cache[u]||0,u<o)l&&this._group_header_cache?.[u]?.[0]?.value===f?(c=this._group_header_cache[u][1],this._group_header_cache[u][2]+=1,1===r&&(this._group_header_cache[u][0].row_header_x=n),c.setAttribute("colspan",this._group_header_cache[u][2])):(c=this._draw_group_th(this._offset_cache,u,f),h=this._draw_group(t,f,c),this._group_header_cache[u]=[h,c,1]);else{c=this._draw_group_th(this._offset_cache,u,f),h=this._draw_th(e||t,f,c,s,n),typeof d>"u"&&(d={th:c,metadata:h});for(let[e]of this._group_header_cache)e.size_key=h.size_key;c.removeAttribute("colspan")}this._get_row(u).tr.classList.toggle("rt-autosize",u===o),c.classList.toggle("rt-group-corner",void 0===s),h&&(h.x=typeof s>"u"?s:Math.floor(s),h.column_header_y=u,h.x0=Math.floor(a),h._virtual_x=i,1===r&&(h.row_header_x=n))}return this._clean_rows(this._offset_cache.length),d=d||{th:c,metadata:h},d}}clean(){this._clean_columns(this._offset_cache)}reset_header_cache(){this._offset_cache=[],this._group_header_cache=[]}},u=class extends d{_draw_td(e,t,r,s,{column_name:n},{ridx_offset:a},i){let o=this._get_cell(e,t,s),l=this._get_or_create_metadata(o);l.y=t+Math.floor(a),l.size_key=i,"TD"===e&&(l.column_header=n);let c=this._column_sizes.override[l.size_key];if(c){let e=this._column_sizes.auto[l.size_key];o.classList.toggle("rt-cell-clip",e>c),o.style.minWidth=c+"px",o.style.maxWidth=c+"px"}else o.classList.remove("rt-cell-clip"),o.style.minWidth="",o.style.maxWidth="";return l.value!==r&&(r instanceof HTMLElement?(o.textContent="",o.appendChild(r)):o.textContent=r),l.value=r,{td:o,metadata:l}}draw(e,t,r,s=!1,n,a,i,o){let l,{cidx:c,column_data:h,row_headers:f,column_data_listener_metadata:d}=t,{row_height:_}=r,u=[],m=[],b=0,g=[];for(let p=0;p<(s?r.row_headers_length:1);p++){b=0;for(let w of h){let h,v=f?.[b];if(s){let e=w[p],s=this._fetch_cell(b-(u[p]||1),c+p),n=this._get_or_create_metadata(s),i=this._fetch_cell(b,c+p-(g[b]||1)),l=this._get_or_create_metadata(i);!o||!i||l.value!==e&&void 0!==e||i.hasAttribute("rowspan")?o&&s&&n.value===e&&!s.hasAttribute("colspan")?(u[p]=u[p]?u[p]+1:2,s.setAttribute("rowspan",u[p]),this._replace_cell(b,c+p)):(h=this._draw_td("TH",b,e,c+p,t,r,p),h.td.style.display="",h.td.removeAttribute("rowspan"),h.td.removeAttribute("colspan"),h.metadata.row_header=w,h.metadata.row_header_x=p,h.metadata.y0=Math.floor(r.ridx_offset),h.metadata.y1=Math.ceil(r.y1),h.metadata._virtual_x=p,typeof a<"u"&&(h.metadata.x0=Math.floor(a)),u[p]=1,g[b]=1,m[p]=h):(g[b]=g[b]?g[b]+1:2,i.setAttribute("colspan",g[b]),this._replace_cell(b,c+p))}else h=this._draw_td("TD",b,w,c,t,r,i),d&&(h.metadata.user=d[b]),h.metadata.x=typeof n>"u"?n:Math.floor(n),h.metadata.x1=Math.ceil(r.x1),h.metadata.row_header=v||[],h.metadata.y0=Math.floor(r.ridx_offset),h.metadata.y1=Math.ceil(r.y1),h.metadata.dx=Math.floor(n-a),h.metadata.dy=h.metadata.y-Math.floor(h.metadata.y0),h.metadata._virtual_x=c,typeof a<"u"&&(h.metadata.x0=Math.floor(a)),m[0]=h;if(b++,l=h?h.metadata:l,_=_||h?.td.offsetHeight,b*_>e)break}}return this._clean_rows(b),{tds:m,ridx:b,metadata:l,row_height:_}}clean({ridx:e,cidx:t}){this._clean_rows(e),this._clean_columns(t)}},m=class{constructor(e,t,r){this.clear(r);let[s]=r.children,[n,a]=s.children;this.table=s,this._column_sizes=t,this.header=new _(t,e,n),this.body=new u(t,e,a),this.fragment=document.createDocumentFragment()}num_columns(){return this.header.num_columns()}clear(e){e.innerHTML=a`
            <table cellspacing="0">
                <thead></thead>
                <tbody></tbody>
            </table>
        `}autosize_cells(e,t){for(;e.length>0;){let[r,s]=e.pop(),n=r.getBoundingClientRect();if(!n||(this._column_sizes.row_height=t||Math.max(10,Math.min(this._column_sizes.row_height||n.height,n.height)),!s))continue;this._column_sizes.indices[s.size_key]=n.width;let a=void 0!==this._column_sizes.override[s.size_key];n.width&&!a&&(this._column_sizes.auto[s.size_key]=n.width),"0px"===r.style.minWidth&&(r.style.minWidth=`${n.width}px`)}}async*draw(e,t,r,s,n,a){let{width:i,height:o}=e,{view:l,config:c}=t,{data:h,row_headers:f,column_headers:d,metadata:_,num_row_headers:u,num_column_headers:m,column_header_merge_depth:b,merge_headers:g="both"}=await l(Math.floor(n.start_col),Math.floor(n.start_row),Math.ceil(n.end_col),Math.ceil(n.end_row)),p="both"===g||"row"===g,w="both"===g||"column"===g,{start_row:v=0,start_col:y=0,end_col:x=0,end_row:k=0}=n;f&&(this._row_headers_length=f.reduce((e,t)=>Math.max(e,t.length),0),f=f.map(e=>(e.length=this._row_headers_length,e))),t.config.row_pivots=void 0!==u?Array(u).fill(0):Array(f?.[0]?.length||0).fill(0),t.config.column_pivots=void 0!==m?Array(m).fill(0):Array(d?.[0]?.length||0).fill(0);let M,z={viewport_width:0,selected_id:r,ridx_offset:v,sub_cell_offset:this._column_sizes.indices[(this._row_headers_length||0)+Math.floor(n.start_col)]||0,x0:y,x1:x,y1:k,row_height:this._column_sizes.row_height,row_headers_length:this._row_headers_length},A=0,N=[],E=!0;if(f?.length>0){let e=c.row_pivots.join(","),r={column_name:e,cidx:0,column_data:f,row_headers:f,first_col:E},n=A+Math.floor(y);M=this.body.draw(o,r,{...z,x0:0},!0,void 0,void 0,n,p);let a=[];for(let s=0;s<t.config.row_pivots.length;s++){let r=this.header.draw(e,Array(t.config.column_pivots.length).fill(""),1,void 0,s,y,s,b,w);r&&a.push(r)}if(E=!1,z.viewport_width+=a.reduce((e,{th:t},r)=>e+(this._column_sizes.indices[r]||t.offsetWidth),0),z.row_height=z.row_height||M.row_height,A=f[0].length,!s)for(let s=0;s<t.config.row_pivots.length;s++){let{td:e,metadata:t}=M.tds[s]||{},{th:r,metadata:n}=a[s]||{};(e||r)&&N.push([r||e,n||t])}}try{let e=0,t=a-n.start_col;for(;e<t;){if(!h[e]){let t=Math.max(n.end_col,0);n.start_col=t;let r=0,s=0;for(;this._column_sizes.indices.length>A+y+r+1&&s+z.viewport_width<i;)r++,s+=this._column_sizes.indices[A+y+r];if(s+z.viewport_width<i){let e=Math.min(a,t+5);n.end_col=Math.max(1,Math.min(a,e))}else n.end_col=Math.max(1,Math.min(a,t+r));let o=l(Math.floor(n.start_col),Math.floor(n.start_row),Math.ceil(n.end_col),Math.ceil(n.end_row));yield;let c=await o;if(typeof c.column_header_merge_depth<"u"&&(b=c.column_header_merge_depth),typeof c.merge_headers<"u"&&(g=c.merge_headers),0===c.data.length)return void(yield N);n.end_col=n.start_col+c.data.length;for(let n=0;n<c.data.length;n++)h[e+n]=c.data[n],c.metadata&&(_[e+n]=c.metadata[n]),d&&(d[e+n]=c.column_headers?.[n])}let t=d?.[e]||"",r=h[e],c=_?.[e],u={column_name:t,cidx:A,column_data:r,column_data_listener_metadata:c,row_headers:f,first_col:E},m=e+y,v=A+Math.floor(y),x=this.header.draw(void 0,t,void 0,m,v,y,A,b,w);if(M=this.body.draw(o,u,z,!1,m,y,v,p),E=!1,!s)for(let{td:e,metadata:s}of M.tds)N.push([x?.th||e,x?.metadata||s]);let k=this._column_sizes.indices[A+Math.floor(y)];if(z.viewport_width+=k||(x?.th?.offsetWidth||M.tds.reduce((e,t)=>e+t.td?.offsetWidth,0)),z.row_height=z.row_height||M.row_height,A++,e++,z.viewport_width-z.sub_cell_offset>i){this.body.clean({ridx:M?.ridx||0,cidx:A}),this.header.clean(),yield N,z.viewport_width=0;for(let[e]of N)z.viewport_width+=e.offsetWidth;if(z.viewport_width-z.sub_cell_offset>i)return}}this.body.clean({ridx:M?.ridx||0,cidx:A}),this.header.clean(),yield N}finally{this.body.clean({ridx:M?.ridx||0,cidx:A}),this.header.clean(),this.body._span_factory.reset(),this.header._span_factory.reset()}}},b=["both","horizontal","vertical","none"];document.createElement("regular-table").constructor===HTMLElement&&window.customElements.define("regular-table",class extends h{constructor(){super(),this._column_sizes={auto:[],override:[],indices:[]},this._style_callbacks=[],this._initialized=!1}connectedCallback(){this._initialized||(this.create_shadow_dom(),this.register_listeners(),this.setAttribute("tabindex","0"),this._initialized=!0,this.table_model=new m(this._table_clip,this._column_sizes,this))}_reset_viewport(){this._start_row=void 0,this._end_row=void 0,this._start_col=void 0,this._end_col=void 0}_reset_scroll(){this._column_sizes.indices=[],this.scrollTop=0,this.scrollLeft=0,this._reset_viewport()}_resetAutoSize(){this._column_sizes.auto=[],this._column_sizes.override=[],this._column_sizes.indices=[];for(let e=0;e<this.table_model.header.num_columns();e++){let t=this.table_model.header.get_column_header(e);t.style.minWidth="",t.style.maxWidth=""}}clear(){this.table_model=new m(this._table_clip,this._column_sizes,this)}addStyleListener(e){this._style_callbacks=this._style_callbacks.concat(e);let t=!0;return()=>{if(!t)return;t=!1;let r=this._style_callbacks=this._style_callbacks.slice(),s=r.indexOf(e);r.splice(s,1)}}removeStyleListener(e){let t=this._style_callbacks.length;this._style_callbacks=this._style_callbacks.filter(t=>t!==e),console.assert(this._style_callbacks.length===t-1,"No listener found")}invalidate(){if(!this._is_styling)throw new Error("Cannot call `invalidate()` outside of a `StyleListener`");this._invalidated=!0}getMeta(t){if(!(typeof t>"u")){if(t instanceof HTMLElement)return e.get(t);if(t.row_header_x>=0){if(t.row_header_x<this._view_cache.config.row_pivots.length){let e=this.table_model.body._fetch_cell(t.y,t.row_header_x);return this.getMeta(e)}}else{if(!(t.column_header_y>=0))return this.getMeta(this.table_model.body._fetch_cell(t.dy,t.dx+this.table_model._row_headers_length));if(t.column_header_y<this._view_cache.config.column_pivots.length){let e=this.table_model.body._fetch_cell(t.column_header_y,t.y);return this.getMeta(e)}}}}getDrawFPS(){return function(){let e=performance.now(),t=e-n,a=r,i=1e3*s/t,o=s;return r=0,s=0,n=e,{avg:a,real_fps:i,virtual_fps:1e3/a,num_frames:o,elapsed:t}}()}async scrollToCell(e,t){if(!this._view_cache)return void console.warn("data listener not configured");let r=this._column_sizes.row_height||19,s=this._view_cache.config.column_pivots.length*r,n=(this._table_clip.offsetHeight-s)%r,a=(this._virtual_panel.offsetHeight-n)/this._nrows;this.scrollTop=Math.ceil(a*t);let i=0;for(;e>0;)e--,i+=this._column_sizes.indices[e+this._view_cache.config.row_pivots.length]||60;this.scrollLeft=Math.ceil(i),await new Promise(requestAnimationFrame),await this._draw_flush()}setDataListener(e,{virtual_mode:t="both",preserve_state:r=!1}={}){console.assert(b.indexOf(t)>-1,`Unknown virtual_mode ${t};  valid options are "both" (default), "horizontal", "vertical" or "none"`);let s=this._virtual_mode!==t;if(r)console.assert(!s,"preserve_state called with modified virtual_mode"),this._view_cache.view=e;else{let r={row_pivots:[],column_pivots:[]};this._virtual_mode=t,this._invalid_schema=!0,this._view_cache={view:e,config:r},s&&this._setup_virtual_scroll()}}__noop_jsdoc_hints(){}})},7855:(e,t,r)=>{r.d(t,{Ay:()=>ur});const{min:s,max:n}=Math,a=(e,t=0,r=1)=>s(n(t,e),r),i=e=>{e._clipped=!1,e._unclipped=e.slice(0);for(let t=0;t<=3;t++)t<3?((e[t]<0||e[t]>255)&&(e._clipped=!0),e[t]=a(e[t],0,255)):3===t&&(e[t]=a(e[t],0,1));return e},o={};for(let mr of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])o[`[object ${mr}]`]=mr.toLowerCase();function l(e){return o[Object.prototype.toString.call(e)]||"object"}const c=(e,t=null)=>e.length>=3?Array.prototype.slice.call(e):"object"==l(e[0])&&t?t.split("").filter(t=>void 0!==e[0][t]).map(t=>e[0][t]):e[0].slice(0),h=e=>{if(e.length<2)return null;const t=e.length-1;return"string"==l(e[t])?e[t].toLowerCase():null},{PI:f,min:d,max:_}=Math,u=e=>Math.round(100*e)/100,m=e=>Math.round(100*e)/100,b=2*f,g=f/3,p=f/180,w=180/f;function v(e){return[...e.slice(0,3).reverse(),...e.slice(3)]}const y={format:{},autodetect:[]};const x=class{constructor(...e){const t=this;if("object"===l(e[0])&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];let r=h(e),s=!1;if(!r){s=!0,y.sorted||(y.autodetect=y.autodetect.sort((e,t)=>t.p-e.p),y.sorted=!0);for(let t of y.autodetect)if(r=t.test(...e),r)break}if(!y.format[r])throw new Error("unknown format: "+e);{const n=y.format[r].apply(null,s?e:e.slice(0,-1));t._rgb=i(n)}3===t._rgb.length&&t._rgb.push(1)}toString(){return"function"==l(this.hex)?this.hex():`[${this._rgb.join(",")}]`}},k=(...e)=>new x(...e);k.version="3.1.2";const M=k,z={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},A=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,N=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,E=e=>{if(e.match(A)){4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]);const t=parseInt(e,16);return[t>>16,t>>8&255,255&t,1]}if(e.match(N)){5!==e.length&&9!==e.length||(e=e.substr(1)),4===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);const t=parseInt(e,16);return[t>>24&255,t>>16&255,t>>8&255,Math.round((255&t)/255*100)/100]}throw new Error(`unknown hex color: ${e}`)},{round:L}=Math,j=(...e)=>{let[t,r,s,n]=c(e,"rgba"),a=h(e)||"auto";void 0===n&&(n=1),"auto"===a&&(a=n<1?"rgba":"rgb"),t=L(t),r=L(r),s=L(s);let i="000000"+(t<<16|r<<8|s).toString(16);i=i.substr(i.length-6);let o="0"+L(255*n).toString(16);switch(o=o.substr(o.length-2),a.toLowerCase()){case"rgba":return`#${i}${o}`;case"argb":return`#${o}${i}`;default:return`#${i}`}};x.prototype.name=function(){const e=j(this._rgb,"rgb");for(let t of Object.keys(z))if(z[t]===e)return t.toLowerCase();return e},y.format.named=e=>{if(e=e.toLowerCase(),z[e])return E(z[e]);throw new Error("unknown color name: "+e)},y.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&"string"===l(e)&&z[e.toLowerCase()])return"named"}}),x.prototype.alpha=function(e,t=!1){return void 0!==e&&"number"===l(e)?t?(this._rgb[3]=e,this):new x([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]},x.prototype.clipped=function(){return this._rgb._clipped||!1};const $={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452,kE:216/24389,kKE:8,kK:24389/27,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},P=$,W=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function C(e){const t=W.get(String(e).toLowerCase());if(!t)throw new Error("unknown Lab illuminant "+e);$.labWhitePoint=e,$.Xn=t[0],$.Zn=t[1]}function R(){return $.labWhitePoint}const O=(e,t,r)=>{const{kE:s,kK:n,kKE:a,Xn:i,Yn:o,Zn:l}=P,c=(e+16)/116,h=.002*t+c,f=c-.005*r,d=h*h*h,_=f*f*f;return[(d>s?d:(116*h-16)/n)*i,(e>a?Math.pow((e+16)/116,3):e/n)*o,(_>s?_:(116*f-16)/n)*l]},T=e=>{const t=Math.sign(e);return((e=Math.abs(e))<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)*t},Y=(e,t,r)=>{const{MtxAdaptMa:s,MtxAdaptMaI:n,MtxXYZ2RGB:a,RefWhiteRGB:i,Xn:o,Yn:l,Zn:c}=P,h=o*s.m00+l*s.m10+c*s.m20,f=o*s.m01+l*s.m11+c*s.m21,d=o*s.m02+l*s.m12+c*s.m22,_=i.X*s.m00+i.Y*s.m10+i.Z*s.m20,u=i.X*s.m01+i.Y*s.m11+i.Z*s.m21,m=i.X*s.m02+i.Y*s.m12+i.Z*s.m22,b=(e*s.m00+t*s.m10+r*s.m20)*(_/h),g=(e*s.m01+t*s.m11+r*s.m21)*(u/f),p=(e*s.m02+t*s.m12+r*s.m22)*(m/d),w=b*n.m00+g*n.m10+p*n.m20,v=b*n.m01+g*n.m11+p*n.m21,y=b*n.m02+g*n.m12+p*n.m22;return[255*T(w*a.m00+v*a.m10+y*a.m20),255*T(w*a.m01+v*a.m11+y*a.m21),255*T(w*a.m02+v*a.m12+y*a.m22)]},X=(...e)=>{e=c(e,"lab");const[t,r,s]=e,[n,a,i]=O(t,r,s),[o,l,h]=Y(n,a,i);return[o,l,h,e.length>3?e[3]:1]};function B(e){const t=Math.sign(e);return((e=Math.abs(e))<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4))*t}const H=(e,t,r)=>{e=B(e/255),t=B(t/255),r=B(r/255);const{MtxRGB2XYZ:s,MtxAdaptMa:n,MtxAdaptMaI:a,Xn:i,Yn:o,Zn:l,As:c,Bs:h,Cs:f}=P;let d=e*s.m00+t*s.m10+r*s.m20,_=e*s.m01+t*s.m11+r*s.m21,u=e*s.m02+t*s.m12+r*s.m22;const m=i*n.m00+o*n.m10+l*n.m20,b=i*n.m01+o*n.m11+l*n.m21,g=i*n.m02+o*n.m12+l*n.m22;let p=d*n.m00+_*n.m10+u*n.m20,w=d*n.m01+_*n.m11+u*n.m21,v=d*n.m02+_*n.m12+u*n.m22;return p*=m/c,w*=b/h,v*=g/f,d=p*a.m00+w*a.m10+v*a.m20,_=p*a.m01+w*a.m11+v*a.m21,u=p*a.m02+w*a.m12+v*a.m22,[d,_,u]},q=(...e)=>{const[t,r,s,...n]=c(e,"rgb"),[a,i,o]=H(t,r,s),[l,h,f]=function(e,t,r){const{Xn:s,Yn:n,Zn:a,kE:i,kK:o}=P,l=e/s,c=t/n,h=r/a,f=l>i?Math.pow(l,1/3):(o*l+16)/116,d=c>i?Math.pow(c,1/3):(o*c+16)/116,_=h>i?Math.pow(h,1/3):(o*h+16)/116;return[116*d-16,500*(f-d),200*(d-_)]}(a,i,o);return[l,h,f,...n.length>0&&n[0]<1?[n[0]]:[]]};x.prototype.lab=function(){return q(this._rgb)};Object.assign(M,{lab:(...e)=>new x(...e,"lab"),getLabWhitePoint:R,setLabWhitePoint:C}),y.format.lab=X,y.autodetect.push({p:2,test:(...e)=>{if("array"===l(e=c(e,"lab"))&&3===e.length)return"lab"}}),x.prototype.darken=function(e=1){const t=this.lab();return t[0]-=P.Kn*e,new x(t,"lab").alpha(this.alpha(),!0)},x.prototype.brighten=function(e=1){return this.darken(-e)},x.prototype.darker=x.prototype.darken,x.prototype.brighter=x.prototype.brighten,x.prototype.get=function(e){const[t,r]=e.split("."),s=this[t]();if(r){const e=t.indexOf(r)-("ok"===t.substr(0,2)?2:0);if(e>-1)return s[e];throw new Error(`unknown channel ${r} in mode ${t}`)}return s};const{pow:G}=Math;x.prototype.luminance=function(e,t="rgb"){if(void 0!==e&&"number"===l(e)){if(0===e)return new x([0,0,0,this._rgb[3]],"rgb");if(1===e)return new x([255,255,255,this._rgb[3]],"rgb");let r=this.luminance(),s=20;const n=(r,a)=>{const i=r.interpolate(a,.5,t),o=i.luminance();return Math.abs(e-o)<1e-7||!s--?i:o>e?n(r,i):n(i,a)},a=(r>e?n(new x([0,0,0]),this):n(this,new x([255,255,255]))).rgb();return new x([...a,this._rgb[3]])}return S(...this._rgb.slice(0,3))};const S=(e,t,r)=>.2126*(e=Z(e))+.7152*(t=Z(t))+.0722*(r=Z(r)),Z=e=>(e/=255)<=.03928?e/12.92:G((e+.055)/1.055,2.4),D={},F=(e,t,r=.5,...s)=>{let n=s[0]||"lrgb";if(D[n]||s.length||(n=Object.keys(D)[0]),!D[n])throw new Error(`interpolation mode ${n} is not defined`);return"object"!==l(e)&&(e=new x(e)),"object"!==l(t)&&(t=new x(t)),D[n](e,t,r).alpha(e.alpha()+r*(t.alpha()-e.alpha()))};x.prototype.mix=x.prototype.interpolate=function(e,t=.5,...r){return F(this,e,t,...r)},x.prototype.premultiply=function(e=!1){const t=this._rgb,r=t[3];return e?(this._rgb=[t[0]*r,t[1]*r,t[2]*r,r],this):new x([t[0]*r,t[1]*r,t[2]*r,r],"rgb")};const{sin:K,cos:I}=Math,V=(...e)=>{let[t,r,s]=c(e,"lch");return isNaN(s)&&(s=0),s*=p,[t,I(s)*r,K(s)*r]},U=(...e)=>{e=c(e,"lch");const[t,r,s]=e,[n,a,i]=V(t,r,s),[o,l,h]=X(n,a,i);return[o,l,h,e.length>3?e[3]:1]},J=(...e)=>{const t=v(c(e,"hcl"));return U(...t)},{sqrt:Q,atan2:ee,round:te}=Math,re=(...e)=>{const[t,r,s]=c(e,"lab"),n=Q(r*r+s*s);let a=(ee(s,r)*w+360)%360;return 0===te(1e4*n)&&(a=Number.NaN),[t,n,a]},se=(...e)=>{const[t,r,s,...n]=c(e,"rgb"),[a,i,o]=q(t,r,s),[l,h,f]=re(a,i,o);return[l,h,f,...n.length>0&&n[0]<1?[n[0]]:[]]};x.prototype.lch=function(){return se(this._rgb)},x.prototype.hcl=function(){return v(se(this._rgb))};Object.assign(M,{lch:(...e)=>new x(...e,"lch"),hcl:(...e)=>new x(...e,"hcl")}),y.format.lch=U,y.format.hcl=J,["lch","hcl"].forEach(e=>y.autodetect.push({p:2,test:(...t)=>{if("array"===l(t=c(t,e))&&3===t.length)return e}})),x.prototype.saturate=function(e=1){const t=this.lch();return t[1]+=P.Kn*e,t[1]<0&&(t[1]=0),new x(t,"lch").alpha(this.alpha(),!0)},x.prototype.desaturate=function(e=1){return this.saturate(-e)},x.prototype.set=function(e,t,r=!1){const[s,n]=e.split("."),a=this[s]();if(n){const e=s.indexOf(n)-("ok"===s.substr(0,2)?2:0);if(e>-1){if("string"==l(t))switch(t.charAt(0)){case"+":case"-":a[e]+=+t;break;case"*":a[e]*=+t.substr(1);break;case"/":a[e]/=+t.substr(1);break;default:a[e]=+t}else{if("number"!==l(t))throw new Error("unsupported value for Color.set");a[e]=t}const n=new x(a,s);return r?(this._rgb=n._rgb,this):n}throw new Error(`unknown channel ${n} in mode ${s}`)}return a},x.prototype.tint=function(e=.5,...t){return F(this,"white",e,...t)},x.prototype.shade=function(e=.5,...t){return F(this,"black",e,...t)};const ne=(e,t,r)=>{const s=e._rgb,n=t._rgb;return new x(s[0]+r*(n[0]-s[0]),s[1]+r*(n[1]-s[1]),s[2]+r*(n[2]-s[2]),"rgb")};D.rgb=ne;const{sqrt:ae,pow:ie}=Math,oe=(e,t,r)=>{const[s,n,a]=e._rgb,[i,o,l]=t._rgb;return new x(ae(ie(s,2)*(1-r)+ie(i,2)*r),ae(ie(n,2)*(1-r)+ie(o,2)*r),ae(ie(a,2)*(1-r)+ie(l,2)*r),"rgb")};D.lrgb=oe;const le=(e,t,r)=>{const s=e.lab(),n=t.lab();return new x(s[0]+r*(n[0]-s[0]),s[1]+r*(n[1]-s[1]),s[2]+r*(n[2]-s[2]),"lab")};D.lab=le;const ce=(e,t,r,s)=>{let n,a,i,o,l,c,h,f,d,_,u,m;return"hsl"===s?(n=e.hsl(),a=t.hsl()):"hsv"===s?(n=e.hsv(),a=t.hsv()):"hcg"===s?(n=e.hcg(),a=t.hcg()):"hsi"===s?(n=e.hsi(),a=t.hsi()):"lch"===s||"hcl"===s?(s="hcl",n=e.hcl(),a=t.hcl()):"oklch"===s&&(n=e.oklch().reverse(),a=t.oklch().reverse()),"h"!==s.substr(0,1)&&"oklch"!==s||([i,l,h]=n,[o,c,f]=a),isNaN(i)||isNaN(o)?isNaN(i)?isNaN(o)?_=Number.NaN:(_=o,1!=h&&0!=h||"hsv"==s||(d=c)):(_=i,1!=f&&0!=f||"hsv"==s||(d=l)):(m=o>i&&o-i>180?o-(i+360):o<i&&i-o>180?o+360-i:o-i,_=i+r*m),void 0===d&&(d=l+r*(c-l)),u=h+r*(f-h),new x("oklch"===s?[u,d,_]:[_,d,u],s)},he=(e,t,r)=>ce(e,t,r,"lch");D.lch=he,D.hcl=he;const fe=e=>{if("number"==l(e)&&e>=0&&e<=16777215){return[e>>16,e>>8&255,255&e,1]}throw new Error("unknown num color: "+e)},de=(...e)=>{const[t,r,s]=c(e,"rgb");return(t<<16)+(r<<8)+s};x.prototype.num=function(){return de(this._rgb)};Object.assign(M,{num:(...e)=>new x(...e,"num")}),y.format.num=fe,y.autodetect.push({p:5,test:(...e)=>{if(1===e.length&&"number"===l(e[0])&&e[0]>=0&&e[0]<=16777215)return"num"}});const _e=(e,t,r)=>{const s=e.num(),n=t.num();return new x(s+r*(n-s),"num")};D.num=_e;const{floor:ue}=Math,me=(...e)=>{e=c(e,"hcg");let t,r,s,[n,a,i]=e;i*=255;const o=255*a;if(0===a)t=r=s=i;else{360===n&&(n=0),n>360&&(n-=360),n<0&&(n+=360),n/=60;const e=ue(n),l=n-e,c=i*(1-a),h=c+o*(1-l),f=c+o*l,d=c+o;switch(e){case 0:[t,r,s]=[d,f,c];break;case 1:[t,r,s]=[h,d,c];break;case 2:[t,r,s]=[c,d,f];break;case 3:[t,r,s]=[c,h,d];break;case 4:[t,r,s]=[f,c,d];break;case 5:[t,r,s]=[d,c,h]}}return[t,r,s,e.length>3?e[3]:1]},be=(...e)=>{const[t,r,s]=c(e,"rgb"),n=d(t,r,s),a=_(t,r,s),i=a-n,o=100*i/255,l=n/(255-i)*100;let h;return 0===i?h=Number.NaN:(t===a&&(h=(r-s)/i),r===a&&(h=2+(s-t)/i),s===a&&(h=4+(t-r)/i),h*=60,h<0&&(h+=360)),[h,o,l]};x.prototype.hcg=function(){return be(this._rgb)};M.hcg=(...e)=>new x(...e,"hcg"),y.format.hcg=me,y.autodetect.push({p:1,test:(...e)=>{if("array"===l(e=c(e,"hcg"))&&3===e.length)return"hcg"}});const ge=(e,t,r)=>ce(e,t,r,"hcg");D.hcg=ge;const{cos:pe}=Math,we=(...e)=>{e=c(e,"hsi");let t,r,s,[n,i,o]=e;return isNaN(n)&&(n=0),isNaN(i)&&(i=0),n>360&&(n-=360),n<0&&(n+=360),n/=360,n<1/3?(s=(1-i)/3,t=(1+i*pe(b*n)/pe(g-b*n))/3,r=1-(s+t)):n<2/3?(n-=1/3,t=(1-i)/3,r=(1+i*pe(b*n)/pe(g-b*n))/3,s=1-(t+r)):(n-=2/3,r=(1-i)/3,s=(1+i*pe(b*n)/pe(g-b*n))/3,t=1-(r+s)),t=a(o*t*3),r=a(o*r*3),s=a(o*s*3),[255*t,255*r,255*s,e.length>3?e[3]:1]},{min:ve,sqrt:ye,acos:xe}=Math,ke=(...e)=>{let t,[r,s,n]=c(e,"rgb");r/=255,s/=255,n/=255;const a=ve(r,s,n),i=(r+s+n)/3,o=i>0?1-a/i:0;return 0===o?t=NaN:(t=(r-s+(r-n))/2,t/=ye((r-s)*(r-s)+(r-n)*(s-n)),t=xe(t),n>s&&(t=b-t),t/=b),[360*t,o,i]};x.prototype.hsi=function(){return ke(this._rgb)};M.hsi=(...e)=>new x(...e,"hsi"),y.format.hsi=we,y.autodetect.push({p:2,test:(...e)=>{if("array"===l(e=c(e,"hsi"))&&3===e.length)return"hsi"}});const Me=(e,t,r)=>ce(e,t,r,"hsi");D.hsi=Me;const ze=(...e)=>{e=c(e,"hsl");const[t,r,s]=e;let n,a,i;if(0===r)n=a=i=255*s;else{const e=[0,0,0],o=[0,0,0],l=s<.5?s*(1+r):s+r-s*r,c=2*s-l,h=t/360;e[0]=h+1/3,e[1]=h,e[2]=h-1/3;for(let t=0;t<3;t++)e[t]<0&&(e[t]+=1),e[t]>1&&(e[t]-=1),6*e[t]<1?o[t]=c+6*(l-c)*e[t]:2*e[t]<1?o[t]=l:3*e[t]<2?o[t]=c+(l-c)*(2/3-e[t])*6:o[t]=c;[n,a,i]=[255*o[0],255*o[1],255*o[2]]}return e.length>3?[n,a,i,e[3]]:[n,a,i,1]},Ae=(...e)=>{e=c(e,"rgba");let[t,r,s]=e;t/=255,r/=255,s/=255;const n=d(t,r,s),a=_(t,r,s),i=(a+n)/2;let o,l;return a===n?(o=0,l=Number.NaN):o=i<.5?(a-n)/(a+n):(a-n)/(2-a-n),t==a?l=(r-s)/(a-n):r==a?l=2+(s-t)/(a-n):s==a&&(l=4+(t-r)/(a-n)),l*=60,l<0&&(l+=360),e.length>3&&void 0!==e[3]?[l,o,i,e[3]]:[l,o,i]};x.prototype.hsl=function(){return Ae(this._rgb)};M.hsl=(...e)=>new x(...e,"hsl"),y.format.hsl=ze,y.autodetect.push({p:2,test:(...e)=>{if("array"===l(e=c(e,"hsl"))&&3===e.length)return"hsl"}});const Ne=(e,t,r)=>ce(e,t,r,"hsl");D.hsl=Ne;const{floor:Ee}=Math,Le=(...e)=>{e=c(e,"hsv");let t,r,s,[n,a,i]=e;if(i*=255,0===a)t=r=s=i;else{360===n&&(n=0),n>360&&(n-=360),n<0&&(n+=360),n/=60;const e=Ee(n),o=n-e,l=i*(1-a),c=i*(1-a*o),h=i*(1-a*(1-o));switch(e){case 0:[t,r,s]=[i,h,l];break;case 1:[t,r,s]=[c,i,l];break;case 2:[t,r,s]=[l,i,h];break;case 3:[t,r,s]=[l,c,i];break;case 4:[t,r,s]=[h,l,i];break;case 5:[t,r,s]=[i,l,c]}}return[t,r,s,e.length>3?e[3]:1]},{min:je,max:$e}=Math,Pe=(...e)=>{e=c(e,"rgb");let[t,r,s]=e;const n=je(t,r,s),a=$e(t,r,s),i=a-n;let o,l,h;return h=a/255,0===a?(o=Number.NaN,l=0):(l=i/a,t===a&&(o=(r-s)/i),r===a&&(o=2+(s-t)/i),s===a&&(o=4+(t-r)/i),o*=60,o<0&&(o+=360)),[o,l,h]};x.prototype.hsv=function(){return Pe(this._rgb)};M.hsv=(...e)=>new x(...e,"hsv"),y.format.hsv=Le,y.autodetect.push({p:2,test:(...e)=>{if("array"===l(e=c(e,"hsv"))&&3===e.length)return"hsv"}});const We=(e,t,r)=>ce(e,t,r,"hsv");D.hsv=We;function Ce(e,t){let r=e.length;Array.isArray(e[0])||(e=[e]),Array.isArray(t[0])||(t=t.map(e=>[e]));let s=t[0].length,n=t[0].map((e,r)=>t.map(e=>e[r])),a=e.map(e=>n.map(t=>Array.isArray(e)?e.reduce((e,r,s)=>e+r*(t[s]||0),0):t.reduce((t,r)=>t+r*e,0)));return 1===r&&(a=a[0]),1===s?a.map(e=>e[0]):a}const Re=(...e)=>{e=c(e,"lab");const[t,r,s,...n]=e,[a,i,o]=(l=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],h=Ce([[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],[t,r,s]),Ce(l,h.map(e=>e**3)));var l,h;const[f,d,_]=Y(a,i,o);return[f,d,_,...n.length>0&&n[0]<1?[n[0]]:[]]};const Oe=(...e)=>{const[t,r,s,...n]=c(e,"rgb");return[...function(e){const t=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],r=Ce([[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],e);return Ce(t,r.map(e=>Math.cbrt(e)))}(H(t,r,s)),...n.length>0&&n[0]<1?[n[0]]:[]]};x.prototype.oklab=function(){return Oe(this._rgb)};Object.assign(M,{oklab:(...e)=>new x(...e,"oklab")}),y.format.oklab=Re,y.autodetect.push({p:2,test:(...e)=>{if("array"===l(e=c(e,"oklab"))&&3===e.length)return"oklab"}});const Te=(e,t,r)=>{const s=e.oklab(),n=t.oklab();return new x(s[0]+r*(n[0]-s[0]),s[1]+r*(n[1]-s[1]),s[2]+r*(n[2]-s[2]),"oklab")};D.oklab=Te;const Ye=(e,t,r)=>ce(e,t,r,"oklch");D.oklch=Ye;const{pow:Xe,sqrt:Be,PI:He,cos:qe,sin:Ge,atan2:Se}=Math,Ze=(e,t)=>{const r=e.length,s=[0,0,0,0];for(let n=0;n<e.length;n++){const a=e[n],i=t[n]/r,o=a._rgb;s[0]+=Xe(o[0],2)*i,s[1]+=Xe(o[1],2)*i,s[2]+=Xe(o[2],2)*i,s[3]+=o[3]*i}return s[0]=Be(s[0]),s[1]=Be(s[1]),s[2]=Be(s[2]),s[3]>.9999999&&(s[3]=1),new x(i(s))},{pow:De}=Math;function Fe(e){let t="rgb",r=M("#ccc"),s=0,n=[0,1],i=[],o=[0,0],c=!1,h=[],f=!1,d=0,_=1,u=!1,m={},b=!0,g=1;const p=function(e){if((e=e||["#fff","#000"])&&"string"===l(e)&&M.brewer&&M.brewer[e.toLowerCase()]&&(e=M.brewer[e.toLowerCase()]),"array"===l(e)){1===e.length&&(e=[e[0],e[0]]),e=e.slice(0);for(let t=0;t<e.length;t++)e[t]=M(e[t]);i.length=0;for(let t=0;t<e.length;t++)i.push(t/(e.length-1))}return x(),h=e};let w=e=>e,v=e=>e;const y=function(e,s){let n,f;if(null==s&&(s=!1),isNaN(e)||null===e)return r;if(s)f=e;else if(c&&c.length>2){f=function(e){if(null!=c){const t=c.length-1;let r=0;for(;r<t&&e>=c[r];)r++;return r-1}return 0}(e)/(c.length-2)}else f=_!==d?(e-d)/(_-d):1;f=v(f),s||(f=w(f)),1!==g&&(f=De(f,g)),f=o[0]+f*(1-o[0]-o[1]),f=a(f,0,1);const u=Math.floor(1e4*f);if(b&&m[u])n=m[u];else{if("array"===l(h))for(let e=0;e<i.length;e++){const r=i[e];if(f<=r){n=h[e];break}if(f>=r&&e===i.length-1){n=h[e];break}if(f>r&&f<i[e+1]){f=(f-r)/(i[e+1]-r),n=M.interpolate(h[e],h[e+1],f,t);break}}else"function"===l(h)&&(n=h(f));b&&(m[u]=n)}return n};var x=()=>m={};p(e);const k=function(e){const t=M(y(e));return f&&t[f]?t[f]():t};return k.classes=function(e){if(null!=e){if("array"===l(e))c=e,n=[e[0],e[e.length-1]];else{const t=M.analyze(n);c=0===e?[t.min,t.max]:M.limits(t,"e",e)}return k}return c},k.domain=function(e){if(!arguments.length)return n;d=e[0],_=e[e.length-1],i=[];const t=h.length;if(e.length===t&&d!==_)for(let r of Array.from(e))i.push((r-d)/(_-d));else{for(let e=0;e<t;e++)i.push(e/(t-1));if(e.length>2){const t=e.map((t,r)=>r/(e.length-1)),r=e.map(e=>(e-d)/(_-d));r.every((e,r)=>t[r]===e)||(v=e=>{if(e<=0||e>=1)return e;let s=0;for(;e>=r[s+1];)s++;const n=(e-r[s])/(r[s+1]-r[s]);return t[s]+n*(t[s+1]-t[s])})}}return n=[d,_],k},k.mode=function(e){return arguments.length?(t=e,x(),k):t},k.range=function(e,t){return p(e),k},k.out=function(e){return f=e,k},k.spread=function(e){return arguments.length?(s=e,k):s},k.correctLightness=function(e){return null==e&&(e=!0),u=e,x(),w=u?function(e){const t=y(0,!0).lab()[0],r=y(1,!0).lab()[0],s=t>r;let n=y(e,!0).lab()[0];const a=t+(r-t)*e;let i=n-a,o=0,l=1,c=20;for(;Math.abs(i)>.01&&c-- >0;)(function(){s&&(i*=-1),i<0?(o=e,e+=.5*(l-e)):(l=e,e+=.5*(o-e)),n=y(e,!0).lab()[0],i=n-a})();return e}:e=>e,k},k.padding=function(e){return null!=e?("number"===l(e)&&(e=[e,e]),o=e,k):o},k.colors=function(t,r){arguments.length<2&&(r="hex");let s=[];if(0===arguments.length)s=h.slice(0);else if(1===t)s=[k(.5)];else if(t>1){const e=n[0],r=n[1]-e;s=function(e,t,r){let s=[],n=e<t,a=r?n?t+1:t-1:t;for(let i=e;n?i<a:i>a;n?i++:i--)s.push(i);return s}(0,t,!1).map(s=>k(e+s/(t-1)*r))}else{e=[];let t=[];if(c&&c.length>2)for(let e=1,r=c.length,s=1<=r;s?e<r:e>r;s?e++:e--)t.push(.5*(c[e-1]+c[e]));else t=n;s=t.map(e=>k(e))}return M[r]&&(s=s.map(e=>e[r]())),s},k.cache=function(e){return null!=e?(b=e,k):b},k.gamma=function(e){return null!=e?(g=e,k):g},k.nodata=function(e){return null!=e?(r=M(e),k):r},k}const{round:Ke}=Math;x.prototype.rgb=function(e=!0){return!1===e?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Ke)},x.prototype.rgba=function(e=!0){return this._rgb.slice(0,4).map((t,r)=>r<3?!1===e?t:Ke(t):t)};Object.assign(M,{rgb:(...e)=>new x(...e,"rgb")}),y.format.rgb=(...e)=>{const t=c(e,"rgba");return void 0===t[3]&&(t[3]=1),t},y.autodetect.push({p:3,test:(...e)=>{if("array"===l(e=c(e,"rgba"))&&(3===e.length||4===e.length&&"number"==l(e[3])&&e[3]>=0&&e[3]<=1))return"rgb"}});const Ie=(e,t,r)=>{if(!Ie[r])throw new Error("unknown blend mode "+r);return Ie[r](e,t)},Ve=e=>(t,r)=>{const s=M(r).rgb(),n=M(t).rgb();return M.rgb(e(s,n))},Ue=e=>(t,r)=>{const s=[];return s[0]=e(t[0],r[0]),s[1]=e(t[1],r[1]),s[2]=e(t[2],r[2]),s};Ie.normal=Ve(Ue(e=>e)),Ie.multiply=Ve(Ue((e,t)=>e*t/255)),Ie.screen=Ve(Ue((e,t)=>255*(1-(1-e/255)*(1-t/255)))),Ie.overlay=Ve(Ue((e,t)=>t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255)))),Ie.darken=Ve(Ue((e,t)=>e>t?t:e)),Ie.lighten=Ve(Ue((e,t)=>e>t?e:t)),Ie.dodge=Ve(Ue((e,t)=>255===e||(e=t/255*255/(1-e/255))>255?255:e)),Ie.burn=Ve(Ue((e,t)=>255*(1-(1-t/255)/(e/255))));const Je=Ie,{pow:Qe,sin:et,cos:tt}=Math;const{floor:rt,random:st}=Math,{log:nt,pow:at,floor:it,abs:ot}=Math;function lt(e,t=null){const r={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===l(e)&&(e=Object.values(e)),e.forEach(e=>{t&&"object"===l(e)&&(e=e[t]),null==e||isNaN(e)||(r.values.push(e),r.sum+=e,e<r.min&&(r.min=e),e>r.max&&(r.max=e),r.count+=1)}),r.domain=[r.min,r.max],r.limits=(e,t)=>ct(r,e,t),r}function ct(e,t="equal",r=7){"array"==l(e)&&(e=lt(e));const{min:s,max:n}=e,a=e.values.sort((e,t)=>e-t);if(1===r)return[s,n];const i=[];if("c"===t.substr(0,1)&&(i.push(s),i.push(n)),"e"===t.substr(0,1)){i.push(s);for(let e=1;e<r;e++)i.push(s+e/r*(n-s));i.push(n)}else if("l"===t.substr(0,1)){if(s<=0)throw new Error("Logarithmic scales are only possible for values > 0");const e=Math.LOG10E*nt(s),t=Math.LOG10E*nt(n);i.push(s);for(let s=1;s<r;s++)i.push(at(10,e+s/r*(t-e)));i.push(n)}else if("q"===t.substr(0,1)){i.push(s);for(let e=1;e<r;e++){const t=(a.length-1)*e/r,s=it(t);if(s===t)i.push(a[s]);else{const e=t-s;i.push(a[s]*(1-e)+a[s+1]*e)}}i.push(n)}else if("k"===t.substr(0,1)){let e;const t=a.length,o=new Array(t),l=new Array(r);let c=!0,h=0,f=null;f=[],f.push(s);for(let a=1;a<r;a++)f.push(s+a/r*(n-s));for(f.push(n);c;){for(let e=0;e<r;e++)l[e]=0;for(let e=0;e<t;e++){const t=a[e];let s,n=Number.MAX_VALUE;for(let a=0;a<r;a++){const r=ot(f[a]-t);r<n&&(n=r,s=a),l[s]++,o[e]=s}}const s=new Array(r);for(let e=0;e<r;e++)s[e]=null;for(let r=0;r<t;r++)e=o[r],null===s[e]?s[e]=a[r]:s[e]+=a[r];for(let e=0;e<r;e++)s[e]*=1/l[e];c=!1;for(let e=0;e<r;e++)if(s[e]!==f[e]){c=!0;break}f=s,h++,h>200&&(c=!1)}const d={};for(let s=0;s<r;s++)d[s]=[];for(let r=0;r<t;r++)e=o[r],d[e].push(a[r]);let _=[];for(let s=0;s<r;s++)_.push(d[s][0]),_.push(d[s][d[s].length-1]);_=_.sort((e,t)=>e-t),i.push(_[0]);for(let r=1;r<_.length;r+=2){const e=_[r];isNaN(e)||-1!==i.indexOf(e)||i.push(e)}}return i}const ht=.022;function ft(e,t,r){return.2126729*Math.pow(e/255,2.4)+.7151522*Math.pow(t/255,2.4)+.072175*Math.pow(r/255,2.4)}const{sqrt:dt,pow:_t,min:ut,max:mt,atan2:bt,abs:gt,cos:pt,sin:wt,exp:vt,PI:yt}=Math;const xt={cool:()=>Fe([M.hsl(180,1,.9),M.hsl(250,.7,.4)]),hot:()=>Fe(["#000","#f00","#ff0","#fff"]).mode("rgb")},kt={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Mt=Object.keys(kt),zt=new Map(Mt.map(e=>[e.toLowerCase(),e])),At="function"==typeof Proxy?new Proxy(kt,{get(e,t){const r=t.toLowerCase();if(zt.has(r))return e[zt.get(r)]},getOwnPropertyNames:()=>Object.getOwnPropertyNames(Mt)}):kt,Nt=(...e)=>{e=c(e,"cmyk");const[t,r,s,n]=e,a=e.length>4?e[4]:1;return 1===n?[0,0,0,a]:[t>=1?0:255*(1-t)*(1-n),r>=1?0:255*(1-r)*(1-n),s>=1?0:255*(1-s)*(1-n),a]},{max:Et}=Math,Lt=(...e)=>{let[t,r,s]=c(e,"rgb");t/=255,r/=255,s/=255;const n=1-Et(t,Et(r,s)),a=n<1?1/(1-n):0;return[(1-t-n)*a,(1-r-n)*a,(1-s-n)*a,n]};x.prototype.cmyk=function(){return Lt(this._rgb)};Object.assign(M,{cmyk:(...e)=>new x(...e,"cmyk")}),y.format.cmyk=Nt,y.autodetect.push({p:2,test:(...e)=>{if("array"===l(e=c(e,"cmyk"))&&4===e.length)return"cmyk"}});const jt=(...e)=>{const t=c(e,"hsla");let r=h(e)||"lsa";return t[0]=u(t[0]||0)+"deg",t[1]=u(100*t[1])+"%",t[2]=u(100*t[2])+"%","hsla"===r||t.length>3&&t[3]<1?(t[3]="/ "+(t.length>3?t[3]:1),r="hsla"):t.length=3,`${r.substr(0,3)}(${t.join(" ")})`},$t=(...e)=>{const t=c(e,"lab");let r=h(e)||"lab";return t[0]=u(t[0])+"%",t[1]=u(t[1]),t[2]=u(t[2]),"laba"===r||t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`lab(${t.join(" ")})`},Pt=(...e)=>{const t=c(e,"lch");let r=h(e)||"lab";return t[0]=u(t[0])+"%",t[1]=u(t[1]),t[2]=isNaN(t[2])?"none":u(t[2])+"deg","lcha"===r||t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`lch(${t.join(" ")})`},Wt=(...e)=>{const t=c(e,"lab");return t[0]=u(100*t[0])+"%",t[1]=m(t[1]),t[2]=m(t[2]),t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`oklab(${t.join(" ")})`},Ct=(...e)=>{const[t,r,s,...n]=c(e,"rgb"),[a,i,o]=Oe(t,r,s),[l,h,f]=re(a,i,o);return[l,h,f,...n.length>0&&n[0]<1?[n[0]]:[]]},Rt=(...e)=>{const t=c(e,"lch");return t[0]=u(100*t[0])+"%",t[1]=m(t[1]),t[2]=isNaN(t[2])?"none":u(t[2])+"deg",t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`oklch(${t.join(" ")})`},{round:Ot}=Math,Tt=(...e)=>{const t=c(e,"rgba");let r=h(e)||"rgb";if("hsl"===r.substr(0,3))return jt(Ae(t),r);if("lab"===r.substr(0,3)){const e=R();C("d50");const s=$t(q(t),r);return C(e),s}if("lch"===r.substr(0,3)){const e=R();C("d50");const s=Pt(se(t),r);return C(e),s}return"oklab"===r.substr(0,5)?Wt(Oe(t)):"oklch"===r.substr(0,5)?Rt(Ct(t)):(t[0]=Ot(t[0]),t[1]=Ot(t[1]),t[2]=Ot(t[2]),("rgba"===r||t.length>3&&t[3]<1)&&(t[3]="/ "+(t.length>3?t[3]:1),r="rgba"),`${r.substr(0,3)}(${t.slice(0,"rgb"===r?3:4).join(" ")})`)},Yt=(...e)=>{e=c(e,"lch");const[t,r,s,...n]=e,[a,i,o]=V(t,r,s),[l,h,f]=Re(a,i,o);return[l,h,f,...n.length>0&&n[0]<1?[n[0]]:[]]},Xt=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,Bt=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,Ht=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,qt=/\s*/.source,Gt=/\s+/.source,St=/\s*,\s*/.source,Zt=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,Dt=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,Ft=new RegExp("^rgba?\\("+qt+[Xt,Xt,Xt].join(Gt)+Dt+"\\)$"),Kt=new RegExp("^rgb\\("+qt+[Xt,Xt,Xt].join(St)+qt+"\\)$"),It=new RegExp("^rgba\\("+qt+[Xt,Xt,Xt,Bt].join(St)+qt+"\\)$"),Vt=new RegExp("^hsla?\\("+qt+[Zt,Ht,Ht].join(Gt)+Dt+"\\)$"),Ut=new RegExp("^hsl?\\("+qt+[Zt,Ht,Ht].join(St)+qt+"\\)$"),Jt=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Qt=new RegExp("^lab\\("+qt+[Bt,Bt,Bt].join(Gt)+Dt+"\\)$"),er=new RegExp("^lch\\("+qt+[Bt,Bt,Zt].join(Gt)+Dt+"\\)$"),tr=new RegExp("^oklab\\("+qt+[Bt,Bt,Bt].join(Gt)+Dt+"\\)$"),rr=new RegExp("^oklch\\("+qt+[Bt,Bt,Zt].join(Gt)+Dt+"\\)$"),{round:sr}=Math,nr=e=>e.map((e,t)=>t<=2?a(sr(e),0,255):e),ar=(e,t=0,r=100,s=!1)=>("string"==typeof e&&e.endsWith("%")&&(e=parseFloat(e.substring(0,e.length-1))/100,e=s?t+.5*(e+1)*(r-t):t+e*(r-t)),+e),ir=(e,t)=>"none"===e?t:e,or=e=>{if("transparent"===(e=e.toLowerCase().trim()))return[0,0,0,0];let t;if(y.format.named)try{return y.format.named(e)}catch(r){}if((t=e.match(Ft))||(t=e.match(Kt))){let e=t.slice(1,4);for(let t=0;t<3;t++)e[t]=+ar(ir(e[t],0),0,255);e=nr(e);const r=void 0!==t[4]?+ar(t[4],0,1):1;return e[3]=r,e}if(t=e.match(It)){const e=t.slice(1,5);for(let t=0;t<4;t++)e[t]=+ar(e[t],0,255);return e}if((t=e.match(Vt))||(t=e.match(Ut))){const e=t.slice(1,4);e[0]=+ir(e[0].replace("deg",""),0),e[1]=.01*+ar(ir(e[1],0),0,100),e[2]=.01*+ar(ir(e[2],0),0,100);const r=nr(ze(e)),s=void 0!==t[4]?+ar(t[4],0,1):1;return r[3]=s,r}if(t=e.match(Jt)){const e=t.slice(1,4);e[1]*=.01,e[2]*=.01;const r=ze(e);for(let t=0;t<3;t++)r[t]=sr(r[t]);return r[3]=+t[4],r}if(t=e.match(Qt)){const e=t.slice(1,4);e[0]=ar(ir(e[0],0),0,100),e[1]=ar(ir(e[1],0),-125,125,!0),e[2]=ar(ir(e[2],0),-125,125,!0);const r=R();C("d50");const s=nr(X(e));C(r);const n=void 0!==t[4]?+ar(t[4],0,1):1;return s[3]=n,s}if(t=e.match(er)){const e=t.slice(1,4);e[0]=ar(e[0],0,100),e[1]=ar(ir(e[1],0),0,150,!1),e[2]=+ir(e[2].replace("deg",""),0);const r=R();C("d50");const s=nr(U(e));C(r);const n=void 0!==t[4]?+ar(t[4],0,1):1;return s[3]=n,s}if(t=e.match(tr)){const e=t.slice(1,4);e[0]=ar(ir(e[0],0),0,1),e[1]=ar(ir(e[1],0),-.4,.4,!0),e[2]=ar(ir(e[2],0),-.4,.4,!0);const r=nr(Re(e)),s=void 0!==t[4]?+ar(t[4],0,1):1;return r[3]=s,r}if(t=e.match(rr)){const e=t.slice(1,4);e[0]=ar(ir(e[0],0),0,1),e[1]=ar(ir(e[1],0),0,.4,!1),e[2]=+ir(e[2].replace("deg",""),0);const r=nr(Yt(e)),s=void 0!==t[4]?+ar(t[4],0,1):1;return r[3]=s,r}};or.test=e=>Ft.test(e)||Vt.test(e)||Qt.test(e)||er.test(e)||tr.test(e)||rr.test(e)||Kt.test(e)||It.test(e)||Ut.test(e)||Jt.test(e)||"transparent"===e;const lr=or;x.prototype.css=function(e){return Tt(this._rgb,e)};M.css=(...e)=>new x(...e,"css"),y.format.css=lr,y.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&"string"===l(e)&&lr.test(e))return"css"}}),y.format.gl=(...e)=>{const t=c(e,"rgba");return t[0]*=255,t[1]*=255,t[2]*=255,t};M.gl=(...e)=>new x(...e,"gl"),x.prototype.gl=function(){const e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]},x.prototype.hex=function(e){return j(this._rgb,e)};M.hex=(...e)=>new x(...e,"hex"),y.format.hex=E,y.autodetect.push({p:4,test:(e,...t)=>{if(!t.length&&"string"===l(e)&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex"}});const{log:cr}=Math,hr=e=>{const t=e/100;let r,s,n;return t<66?(r=255,s=t<6?0:-155.25485562709179-.44596950469579133*(s=t-2)+104.49216199393888*cr(s),n=t<20?0:.8274096064007395*(n=t-10)-254.76935184120902+115.67994401066147*cr(n)):(r=351.97690566805693+.114206453784165*(r=t-55)-40.25366309332127*cr(r),s=325.4494125711974+.07943456536662342*(s=t-50)-28.0852963507957*cr(s),n=255),[r,s,n,1]},{round:fr}=Math,dr=(...e)=>{const t=c(e,"rgb"),r=t[0],s=t[2];let n=1e3,a=4e4;let i;for(;a-n>.4;){i=.5*(a+n);const e=hr(i);e[2]/e[0]>=s/r?a=i:n=i}return fr(i)};x.prototype.temp=x.prototype.kelvin=x.prototype.temperature=function(){return dr(this._rgb)};const _r=(...e)=>new x(...e,"temp");Object.assign(M,{temp:_r,kelvin:_r,temperature:_r}),y.format.temp=y.format.kelvin=y.format.temperature=hr,x.prototype.oklch=function(){return Ct(this._rgb)};Object.assign(M,{oklch:(...e)=>new x(...e,"oklch")}),y.format.oklch=Yt,y.autodetect.push({p:2,test:(...e)=>{if("array"===l(e=c(e,"oklch"))&&3===e.length)return"oklch"}}),Object.assign(M,{analyze:lt,average:(e,t="lrgb",r=null)=>{const s=e.length;r||(r=Array.from(new Array(s)).map(()=>1));const n=s/r.reduce(function(e,t){return e+t});if(r.forEach((e,t)=>{r[t]*=n}),e=e.map(e=>new x(e)),"lrgb"===t)return Ze(e,r);const a=e.shift(),i=a.get(t),o=[];let l=0,c=0;for(let f=0;f<i.length;f++)if(i[f]=(i[f]||0)*r[0],o.push(isNaN(i[f])?0:r[0]),"h"===t.charAt(f)&&!isNaN(i[f])){const e=i[f]/180*He;l+=qe(e)*r[0],c+=Ge(e)*r[0]}let h=a.alpha()*r[0];e.forEach((e,s)=>{const n=e.get(t);h+=e.alpha()*r[s+1];for(let a=0;a<i.length;a++)if(!isNaN(n[a]))if(o[a]+=r[s+1],"h"===t.charAt(a)){const e=n[a]/180*He;l+=qe(e)*r[s+1],c+=Ge(e)*r[s+1]}else i[a]+=n[a]*r[s+1]});for(let f=0;f<i.length;f++)if("h"===t.charAt(f)){let e=Se(c/o[f],l/o[f])/He*180;for(;e<0;)e+=360;for(;e>=360;)e-=360;i[f]=e}else i[f]=i[f]/o[f];return h/=s,new x(i,t).alpha(h>.99999?1:h,!0)},bezier:e=>{const t=function(e){let t,r,s,n;if(2===(e=e.map(e=>new x(e))).length)[r,s]=e.map(e=>e.lab()),t=function(e){const t=[0,1,2].map(t=>r[t]+e*(s[t]-r[t]));return new x(t,"lab")};else if(3===e.length)[r,s,n]=e.map(e=>e.lab()),t=function(e){const t=[0,1,2].map(t=>(1-e)*(1-e)*r[t]+2*(1-e)*e*s[t]+e*e*n[t]);return new x(t,"lab")};else if(4===e.length){let a;[r,s,n,a]=e.map(e=>e.lab()),t=function(e){const t=[0,1,2].map(t=>(1-e)*(1-e)*(1-e)*r[t]+3*(1-e)*(1-e)*e*s[t]+3*(1-e)*e*e*n[t]+e*e*e*a[t]);return new x(t,"lab")}}else{if(!(e.length>=5))throw new RangeError("No point in running bezier with only one color.");{let r,s,n;r=e.map(e=>e.lab()),n=e.length-1,s=function(e){let t=[1,1];for(let r=1;r<e;r++){let e=[1];for(let r=1;r<=t.length;r++)e[r]=(t[r]||0)+t[r-1];t=e}return t}(n),t=function(e){const t=1-e,a=[0,1,2].map(a=>r.reduce((r,i,o)=>r+s[o]*t**(n-o)*e**o*i[a],0));return new x(a,"lab")}}}return t}(e);return t.scale=()=>Fe(t),t},blend:Je,brewer:At,Color:x,colors:z,contrast:(e,t)=>{e=new x(e),t=new x(t);const r=e.luminance(),s=t.luminance();return r>s?(r+.05)/(s+.05):(s+.05)/(r+.05)},contrastAPCA:(e,t)=>{e=new x(e),t=new x(t),e.alpha()<1&&(e=F(t,e,e.alpha(),"rgb"));const r=ft(...e.rgb()),s=ft(...t.rgb()),n=r>=ht?r:r+Math.pow(ht-r,1.414),a=s>=ht?s:s+Math.pow(ht-s,1.414),i=Math.pow(a,.56)-Math.pow(n,.57),o=Math.pow(a,.65)-Math.pow(n,.62),l=Math.abs(a-n)<5e-4?0:n<a?1.14*i:1.14*o;return 100*(Math.abs(l)<.1?0:l>0?l-.027:l+.027)},cubehelix:function(e=300,t=-1.5,r=1,s=1,n=[0,1]){let a,o=0;"array"===l(n)?a=n[1]-n[0]:(a=0,n=[n,n]);const c=function(l){const c=b*((e+120)/360+t*l),h=Qe(n[0]+a*l,s),f=(0!==o?r[0]+l*o:r)*h*(1-h)/2,d=tt(c),_=et(c);return M(i([255*(h+f*(-.14861*d+1.78277*_)),255*(h+f*(-.29227*d-.90649*_)),255*(h+f*(1.97294*d)),1]))};return c.start=function(t){return null==t?e:(e=t,c)},c.rotations=function(e){return null==e?t:(t=e,c)},c.gamma=function(e){return null==e?s:(s=e,c)},c.hue=function(e){return null==e?r:("array"===l(r=e)?(o=r[1]-r[0],0===o&&(r=r[1])):o=0,c)},c.lightness=function(e){return null==e?n:("array"===l(e)?(n=e,a=e[1]-e[0]):(n=[e,e],a=0),c)},c.scale=()=>M.scale(c),c.hue(r),c},deltaE:function(e,t,r=1,s=1,n=1){var a=function(e){return 360*e/(2*yt)},i=function(e){return 2*yt*e/360};e=new x(e),t=new x(t);const[o,l,c]=Array.from(e.lab()),[h,f,d]=Array.from(t.lab()),_=(o+h)/2,u=(dt(_t(l,2)+_t(c,2))+dt(_t(f,2)+_t(d,2)))/2,m=.5*(1-dt(_t(u,7)/(_t(u,7)+_t(25,7)))),b=l*(1+m),g=f*(1+m),p=dt(_t(b,2)+_t(c,2)),w=dt(_t(g,2)+_t(d,2)),v=(p+w)/2,y=a(bt(c,b)),k=a(bt(d,g)),M=y>=0?y:y+360,z=k>=0?k:k+360,A=gt(M-z)>180?(M+z+360)/2:(M+z)/2,N=1-.17*pt(i(A-30))+.24*pt(i(2*A))+.32*pt(i(3*A+6))-.2*pt(i(4*A-63));let E=z-M;E=gt(E)<=180?E:z<=M?E+360:E-360,E=2*dt(p*w)*wt(i(E)/2);const L=h-o,j=w-p,$=1+.015*_t(_-50,2)/dt(20+_t(_-50,2)),P=1+.045*v,W=1+.015*v*N,C=30*vt(-_t((A-275)/25,2)),R=-(2*dt(_t(v,7)/(_t(v,7)+_t(25,7))))*wt(2*i(C)),O=dt(_t(L/(r*$),2)+_t(j/(s*P),2)+_t(E/(n*W),2)+R*(j/(s*P))*(E/(n*W)));return mt(0,ut(100,O))},distance:function(e,t,r="lab"){e=new x(e),t=new x(t);const s=e.get(r),n=t.get(r);let a=0;for(let i in s){const e=(s[i]||0)-(n[i]||0);a+=e*e}return Math.sqrt(a)},input:y,interpolate:F,limits:ct,mix:F,random:()=>{let e="#";for(let t=0;t<6;t++)e+="0123456789abcdef".charAt(rt(16*st()));return new x(e,"hex")},scale:Fe,scales:xt,valid:(...e)=>{try{return new x(...e),!0}catch(t){return!1}}});const ur=M}}]);